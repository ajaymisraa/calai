[2025-03-13T20:51:02.686Z] === Book Processing Log ===
[2025-03-13T20:51:02.687Z] Book ID: 5751ca60-34fe-44ec-b2bc-352a63bfcc1f
[2025-03-13T20:51:02.687Z] Started: 2025-03-13T20:51:02.686Z
[2025-03-13T20:51:02.687Z] System: darwin 24.3.0
[2025-03-13T20:51:02.687Z] Node: v20.18.1
[2025-03-13T20:51:02.687Z] ===============================
[2025-03-13T20:51:02.687Z] 
[2025-03-13T20:51:02.687Z] ===== MILESTONE: REQUEST_RECEIVED =====
[2025-03-13T20:51:02.687Z] New process-book request received
[2025-03-13T20:51:02.687Z] [LOG] Milestone reached: REQUEST_RECEIVED
[2025-03-13T20:51:02.687Z] === COMPLETE REQUEST DETAILS ===
[2025-03-13T20:51:02.687Z] Timestamp: 2025-03-13T20:51:02.687Z
[2025-03-13T20:51:02.687Z] Request Method: POST
[2025-03-13T20:51:02.687Z] Request URL: /api/process-book
[2025-03-13T20:51:02.687Z] Remote IP: ::1
[2025-03-13T20:51:02.687Z] --- Headers ---
[2025-03-13T20:51:02.687Z] {
  "accept": "application/json, text/plain, */*",
  "content-type": "application/json",
  "user-agent": "axios/1.8.1",
  "content-length": "134",
  "accept-encoding": "gzip, compress, deflate, br",
  "host": "localhost:3002",
  "connection": "keep-alive"
}
[2025-03-13T20:51:02.687Z] --- Request Body ---
[2025-03-13T20:51:02.687Z] {
  "imageUrl": "http://localhost:3000/uploads/5751ca60-34fe-44ec-b2bc-352a63bfcc1f.jpeg",
  "bookId": "5751ca60-34fe-44ec-b2bc-352a63bfcc1f"
}
[2025-03-13T20:51:02.687Z] === END REQUEST DETAILS ===

[2025-03-13T20:51:02.687Z] ===== MILESTONE: API_REQUEST_START =====
[2025-03-13T20:51:02.687Z] Processing book image request
[2025-03-13T20:51:02.687Z] [LOG] Milestone reached: API_REQUEST_START
[2025-03-13T20:51:02.687Z] ===== MILESTONE: IMAGE_ANALYSIS_START =====
[2025-03-13T20:51:02.687Z] Analyzing book cover image
[2025-03-13T20:51:02.687Z] [LOG] Milestone reached: IMAGE_ANALYSIS_START
[2025-03-13T20:51:02.687Z] === BOOK IMAGE ANALYSIS STARTED ===
[2025-03-13T20:51:02.687Z] Analyzing image URL: http://localhost:3000/uploads/5751ca60-34fe-44ec-b2bc-352a63bfcc1f.jpeg
[2025-03-13T20:51:02.687Z] Downloading image to create data URI...
[2025-03-13T20:51:02.687Z] [LOG] Fetching image from URL: http://localhost:3000/uploads/5751ca60-34fe-44ec-b2bc-352a63bfcc1f.jpeg
[2025-03-13T20:51:02.719Z] [LOG] Image fetched successfully, size: 397499 bytes
[2025-03-13T20:51:02.719Z] Image successfully downloaded and converted to data URI
[2025-03-13T20:51:02.719Z] Initiating OpenAI vision analysis...
[2025-03-13T20:51:06.595Z] OpenAI analysis complete. Response status: Success
[2025-03-13T20:51:06.595Z] [LOG] Book detected: {"title":"The Subtle Art of Not Giving a F*ck","author":"Mark Manson","isNonFiction":true}
[2025-03-13T20:51:06.595Z] Book detection result: isBook=true, title="The Subtle Art of Not Giving a F*ck", author="Mark Manson", isNonFiction=true
[2025-03-13T20:51:06.595Z] Detection reasoning: The image clearly shows the front cover of a book with the title and author visible, and the layout suggests it is a self-help book, indicating non-fiction.
[2025-03-13T20:51:06.595Z] === BOOK IMAGE ANALYSIS COMPLETE ===
[2025-03-13T20:51:06.595Z] ===== MILESTONE: IMAGE_ANALYSIS_COMPLETE =====
[2025-03-13T20:51:06.595Z] Book cover analysis complete
[2025-03-13T20:51:06.595Z] [LOG] Milestone reached: IMAGE_ANALYSIS_COMPLETE
[2025-03-13T20:51:06.595Z] === BOOK METADATA ANALYSIS RESULT ===
[2025-03-13T20:51:06.595Z] {
  "isBook": true,
  "title": "The Subtle Art of Not Giving a F*ck",
  "author": "Mark Manson",
  "isNonFiction": true,
  "confidence": 1
}
[2025-03-13T20:51:06.595Z] === END METADATA ANALYSIS ===

[2025-03-13T20:51:06.595Z] [LOG] Image is a book, retrieving content...
[2025-03-13T20:51:06.595Z] ===== MILESTONE: BOOK_CONTENT_START =====
[2025-03-13T20:51:06.595Z] Getting book content for "The Subtle Art of Not Giving a F*ck"
[2025-03-13T20:51:06.595Z] [LOG] Milestone reached: BOOK_CONTENT_START
[2025-03-13T20:51:06.596Z] === BOOK CONTENT PROCESSING STARTED ===
[2025-03-13T20:51:06.596Z] Image URL: http://localhost:3000/uploads/5751ca60-34fe-44ec-b2bc-352a63bfcc1f.jpeg
[2025-03-13T20:51:06.596Z] Original Book ID: 5751ca60-34fe-44ec-b2bc-352a63bfcc1f
[2025-03-13T20:51:06.596Z] Existing Metadata: {
  "isBook": true,
  "title": "The Subtle Art of Not Giving a F*ck",
  "author": "Mark Manson",
  "isNonFiction": true,
  "confidence": 1
}
[2025-03-13T20:51:06.596Z] [LOG] Book metadata analysis complete: The Subtle Art of Not Giving a F*ck by Mark Manson, isBook: true, isNonFiction: true
[2025-03-13T20:51:06.596Z] [LOG] Searching Google Books for: "The Subtle Art of Not Giving a F*ck" by Mark Manson
[2025-03-13T20:51:06.596Z] [LOG] Searching Google Books for: intitle:"The Subtle Art of Not Giving a F*ck" inauthor:"Mark Manson"
[2025-03-13T20:51:07.145Z] [LOG] Preview available for: The Subtle Art of Not Giving a F*ck by Mark Manson
[2025-03-13T20:51:07.145Z] [LOG] Attempting to extract pages from preview: http://play.google.com/books/reader?id=yng_CwAAQBAJ&hl=&as_pt=BOOKS&source=gbs_api
[2025-03-13T20:51:07.145Z] [LOG] Starting to extract preview pages using direct URL navigation...
[2025-03-13T20:51:07.145Z] [LOG] Extracting preview pages for book: yng_CwAAQBAJ
[2025-03-13T20:51:07.145Z] [LOG] Using web reader link: http://play.google.com/books/reader?id=yng_CwAAQBAJ&hl=&as_pt=BOOKS&source=gbs_api
[2025-03-13T20:51:07.320Z] [LOG] Using base URL: https://play.google.com/books/reader?id=yng_CwAAQBAJ&hl=&as_pt=BOOKS&source=gbs_api
[2025-03-13T20:51:07.320Z] [LOG] Navigating to initial page to detect pattern...
[2025-03-13T20:51:07.320Z] [LOG] Navigating to initial page: https://play.google.com/books/reader?id=yng_CwAAQBAJ&hl=&as_pt=BOOKS&source=gbs_api&pg=PA1
[2025-03-13T20:51:12.961Z] [LOG] Final URL after initial navigation: https://play.google.com/books/reader?id=yng_CwAAQBAJ&pg=GBS.PT1&hl=&as_pt=BOOKS&source=gbs_api
[2025-03-13T20:51:12.962Z] [LOG] Detected PT format: GBS.PT1
[2025-03-13T20:51:12.994Z] [LOG] Successfully captured first page with pattern GBS.PT1
[2025-03-13T20:51:12.994Z] [LOG] Navigating to pattern GBS.PT3: https://play.google.com/books/reader?id=yng_CwAAQBAJ&hl=&as_pt=BOOKS&source=gbs_api&pg=GBS.PT3
[2025-03-13T20:51:13.205Z] [LOG] Final URL after navigation: https://play.google.com/books/reader?id=yng_CwAAQBAJ&hl=&as_pt=BOOKS&source=gbs_api&pg=GBS.PT3
[2025-03-13T20:51:13.205Z] [LOG] Waiting for page pattern GBS.PT3 to render...
[2025-03-13T20:51:15.206Z] [LOG] Capturing page pattern GBS.PT3...
[2025-03-13T20:51:15.245Z] [LOG] Successfully captured page pattern GBS.PT3
[2025-03-13T20:51:15.245Z] [LOG] Waiting before going to next page...
[2025-03-13T20:51:15.746Z] [LOG] Navigating to pattern GBS.PT5: https://play.google.com/books/reader?id=yng_CwAAQBAJ&hl=&as_pt=BOOKS&source=gbs_api&pg=GBS.PT5
[2025-03-13T20:51:15.966Z] [LOG] Final URL after navigation: https://play.google.com/books/reader?id=yng_CwAAQBAJ&hl=&as_pt=BOOKS&source=gbs_api&pg=GBS.PT5
[2025-03-13T20:51:15.966Z] [LOG] Waiting for page pattern GBS.PT5 to render...
[2025-03-13T20:51:17.966Z] [LOG] Capturing page pattern GBS.PT5...
[2025-03-13T20:51:18.015Z] [LOG] Successfully captured page pattern GBS.PT5
[2025-03-13T20:51:18.015Z] [LOG] Waiting before going to next page...
[2025-03-13T20:51:18.515Z] [LOG] Navigating to pattern GBS.PT7: https://play.google.com/books/reader?id=yng_CwAAQBAJ&hl=&as_pt=BOOKS&source=gbs_api&pg=GBS.PT7
[2025-03-13T20:51:18.704Z] [LOG] Final URL after navigation: https://play.google.com/books/reader?id=yng_CwAAQBAJ&hl=&as_pt=BOOKS&source=gbs_api&pg=GBS.PT7
[2025-03-13T20:51:18.704Z] [LOG] Waiting for page pattern GBS.PT7 to render...
[2025-03-13T20:51:20.705Z] [LOG] Capturing page pattern GBS.PT7...
[2025-03-13T20:51:20.748Z] [LOG] Successfully captured page pattern GBS.PT7
[2025-03-13T20:51:20.748Z] [LOG] Successfully captured 4 preview pages using GBS.PT pattern
[2025-03-13T20:51:20.798Z] [LOG] Successfully extracted 4 preview pages!
[2025-03-13T20:51:20.798Z] [LOG] Caching preview page 1/4...
[2025-03-13T20:51:20.798Z] [LOG] Created cache directory for book yng_CwAAQBAJ: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ
[2025-03-13T20:51:20.798Z] [LOG] Caching data URI as image for book yng_CwAAQBAJ, page preview_page_01
[2025-03-13T20:51:20.798Z] [LOG] Generated content hash for preview_page_01: 2e1320a274ac45cf495d12c92a264a2c
[2025-03-13T20:51:20.799Z] [LOG] Cached image saved to /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/3daddf0c9198a932c7ad227c0cc58f19.png
[2025-03-13T20:51:20.799Z] [LOG] Saved content hash to /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_01_hash.txt
[2025-03-13T20:51:20.799Z] [LOG] Splitting image /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/3daddf0c9198a932c7ad227c0cc58f19.png into left and right halves
[2025-03-13T20:51:20.819Z] [LOG] Successfully split image into halves:
[2025-03-13T20:51:20.819Z] [LOG] Left: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_01_left.png
[2025-03-13T20:51:20.819Z] [LOG] Right: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_01_right.png
[2025-03-13T20:51:20.819Z] [LOG] Deleted original image: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/3daddf0c9198a932c7ad227c0cc58f19.png
[2025-03-13T20:51:20.819Z] [LOG] Cached preview page 1 at: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_01_left.png
[2025-03-13T20:51:20.819Z] [LOG] Caching preview page 2/4...
[2025-03-13T20:51:20.819Z] [LOG] Caching data URI as image for book yng_CwAAQBAJ, page preview_page_02
[2025-03-13T20:51:20.819Z] [LOG] Generated content hash for preview_page_02: 27ea57e0f9763bab45bd60d37de132cb
[2025-03-13T20:51:20.820Z] [LOG] Cached image saved to /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/829b02fbd1d676d23bdb139c31c0ac79.png
[2025-03-13T20:51:20.820Z] [LOG] Saved content hash to /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_02_hash.txt
[2025-03-13T20:51:20.820Z] [LOG] Splitting image /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/829b02fbd1d676d23bdb139c31c0ac79.png into left and right halves
[2025-03-13T20:51:20.845Z] [LOG] Successfully split image into halves:
[2025-03-13T20:51:20.846Z] [LOG] Left: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_02_left.png
[2025-03-13T20:51:20.846Z] [LOG] Right: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_02_right.png
[2025-03-13T20:51:20.846Z] [LOG] Deleted original image: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/829b02fbd1d676d23bdb139c31c0ac79.png
[2025-03-13T20:51:20.846Z] [LOG] Cached preview page 2 at: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_02_left.png
[2025-03-13T20:51:20.846Z] [LOG] Caching preview page 3/4...
[2025-03-13T20:51:20.846Z] [LOG] Caching data URI as image for book yng_CwAAQBAJ, page preview_page_03
[2025-03-13T20:51:20.847Z] [LOG] Generated content hash for preview_page_03: c80dc558b636ccfec5e78440edba23b6
[2025-03-13T20:51:20.848Z] [LOG] Cached image saved to /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/c7ffcb3d8c589ed02086cf3e46a068be.png
[2025-03-13T20:51:20.848Z] [LOG] Saved content hash to /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_03_hash.txt
[2025-03-13T20:51:20.848Z] [LOG] Splitting image /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/c7ffcb3d8c589ed02086cf3e46a068be.png into left and right halves
[2025-03-13T20:51:20.885Z] [LOG] Successfully split image into halves:
[2025-03-13T20:51:20.885Z] [LOG] Left: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_03_left.png
[2025-03-13T20:51:20.885Z] [LOG] Right: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_03_right.png
[2025-03-13T20:51:20.886Z] [LOG] Deleted original image: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/c7ffcb3d8c589ed02086cf3e46a068be.png
[2025-03-13T20:51:20.886Z] [LOG] Cached preview page 3 at: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_03_left.png
[2025-03-13T20:51:20.886Z] [LOG] Caching preview page 4/4...
[2025-03-13T20:51:20.886Z] [LOG] Caching data URI as image for book yng_CwAAQBAJ, page preview_page_04
[2025-03-13T20:51:20.887Z] [LOG] Generated content hash for preview_page_04: d2e6488d0c0918c2f53454fc604de11f
[2025-03-13T20:51:20.887Z] [LOG] Cached image saved to /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/0400814263ddf903ee23f4179ec8501f.png
[2025-03-13T20:51:20.888Z] [LOG] Saved content hash to /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_04_hash.txt
[2025-03-13T20:51:20.888Z] [LOG] Splitting image /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/0400814263ddf903ee23f4179ec8501f.png into left and right halves
[2025-03-13T20:51:20.928Z] [LOG] Successfully split image into halves:
[2025-03-13T20:51:20.928Z] [LOG] Left: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_04_left.png
[2025-03-13T20:51:20.928Z] [LOG] Right: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_04_right.png
[2025-03-13T20:51:20.928Z] [LOG] Deleted original image: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/0400814263ddf903ee23f4179ec8501f.png
[2025-03-13T20:51:20.928Z] [LOG] Cached preview page 4 at: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_04_left.png
[2025-03-13T20:51:20.928Z] [LOG] Successfully cached 4 preview pages
[2025-03-13T20:51:20.928Z] [LOG] Google Books preview available: PARTIAL
[2025-03-13T20:51:20.929Z] [LOG] Created ID mapping between 5751ca60-34fe-44ec-b2bc-352a63bfcc1f and yng_CwAAQBAJ with original metadata
[2025-03-13T20:51:20.929Z] [LOG] OCR results file not found at /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/ocr_results.json. Cannot update content_analysis.json without OCR results.
[2025-03-13T20:51:20.929Z] [LOG] OCR results file not found at /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/5751ca60-34fe-44ec-b2bc-352a63bfcc1f/ocr_results.json. Cannot update content_analysis.json without OCR results.
[2025-03-13T20:51:20.929Z] [LOG] Generating preview images for book: yng_CwAAQBAJ
[2025-03-13T20:51:20.930Z] [LOG] Book yng_CwAAQBAJ is missing volumeInfo, using limited metadata
[2025-03-13T20:51:20.930Z] [LOG] Adding 4 extracted preview pages
[2025-03-13T20:51:21.097Z] [LOG] Splitting image /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/8771e3348652ef21ce72ba158fa1a091.png into left and right halves
[2025-03-13T20:51:21.106Z] [LOG] Successfully split image into halves:
[2025-03-13T20:51:21.106Z] [LOG] Left: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_info_left.png
[2025-03-13T20:51:21.106Z] [LOG] Right: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_info_right.png
[2025-03-13T20:51:21.106Z] [LOG] Deleted original image: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/8771e3348652ef21ce72ba158fa1a091.png
[2025-03-13T20:51:21.106Z] [LOG] Generated 5 preview images for book yng_CwAAQBAJ
[2025-03-13T20:51:21.106Z] [LOG] First step: cleaning up cache for book yng_CwAAQBAJ
[2025-03-13T20:51:21.106Z] [LOG] Cleaning up expired cache files...
[2025-03-13T20:51:21.106Z] [LOG] Skipped cleaning the book-ocr directory (not in use)
[2025-03-13T20:51:21.110Z] [LOG] Cleaned up 14 unnecessary files and 2 preview_info files
[2025-03-13T20:51:21.110Z] [LOG] Second step: performing OCR for book yng_CwAAQBAJ
[2025-03-13T20:51:21.110Z] [LOG] Found 8 valid preview page files to process with OCR after cleanup
[2025-03-13T20:51:21.110Z] [LOG] Running final OCR processing for preview images in /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ
[2025-03-13T20:51:21.110Z] [LOG] Processing all images in /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ with OCR
[2025-03-13T20:51:21.117Z] [LOG] Found 8 properly named page images for OCR processing
[2025-03-13T20:51:21.117Z] [LOG] Found 8 properly named preview page files for OCR
[2025-03-13T20:51:21.117Z] [LOG] Processing images in the following order:
[2025-03-13T20:51:21.117Z] [LOG] - preview_page_01_left.png (Page: 01, Side: left)
[2025-03-13T20:51:21.117Z] [LOG] - preview_page_01_right.png (Page: 01, Side: right)
[2025-03-13T20:51:21.117Z] [LOG] - preview_page_02_left.png (Page: 02, Side: left)
[2025-03-13T20:51:21.117Z] [LOG] - preview_page_02_right.png (Page: 02, Side: right)
[2025-03-13T20:51:21.117Z] [LOG] - preview_page_03_left.png (Page: 03, Side: left)
[2025-03-13T20:51:21.117Z] [LOG] - preview_page_03_right.png (Page: 03, Side: right)
[2025-03-13T20:51:21.117Z] [LOG] - preview_page_04_left.png (Page: 04, Side: left)
[2025-03-13T20:51:21.117Z] [LOG] - preview_page_04_right.png (Page: 04, Side: right)
[2025-03-13T20:51:21.117Z] [LOG] [1/8] Performing OCR on preview_page_01_left.png...
[2025-03-13T20:51:21.117Z] [LOG] Performing OCR on /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_01_left.png with Tesseract.js...
[2025-03-13T20:51:21.646Z] [LOG] OCR complete for preview_page_01_left.png (222 characters, 74.0% confidence)
[2025-03-13T20:51:21.646Z] [LOG] [2/8] Performing OCR on preview_page_01_right.png...
[2025-03-13T20:51:21.646Z] [LOG] Performing OCR on /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_01_right.png with Tesseract.js...
[2025-03-13T20:51:21.920Z] [LOG] OCR complete for preview_page_01_right.png (28 characters, 60.0% confidence)
[2025-03-13T20:51:21.920Z] [LOG] [3/8] Performing OCR on preview_page_02_left.png...
[2025-03-13T20:51:21.920Z] [LOG] Performing OCR on /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_02_left.png with Tesseract.js...
[2025-03-13T20:51:22.838Z] [LOG] OCR complete for preview_page_02_left.png (928 characters, 92.0% confidence)
[2025-03-13T20:51:22.838Z] [LOG] [4/8] Performing OCR on preview_page_02_right.png...
[2025-03-13T20:51:22.838Z] [LOG] Performing OCR on /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_02_right.png with Tesseract.js...
[2025-03-13T20:51:23.487Z] [LOG] OCR complete for preview_page_02_right.png (647 characters, 90.0% confidence)
[2025-03-13T20:51:23.487Z] [LOG] [5/8] Performing OCR on preview_page_03_left.png...
[2025-03-13T20:51:23.487Z] [LOG] Performing OCR on /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_03_left.png with Tesseract.js...
[2025-03-13T20:51:25.018Z] [LOG] OCR complete for preview_page_03_left.png (1795 characters, 92.0% confidence)
[2025-03-13T20:51:25.018Z] [LOG] [6/8] Performing OCR on preview_page_03_right.png...
[2025-03-13T20:51:25.018Z] [LOG] Performing OCR on /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_03_right.png with Tesseract.js...
[2025-03-13T20:51:25.615Z] [LOG] No metadata file found at /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/5751ca60-34fe-44ec-b2bc-352a63bfcc1f/metadata.json
[2025-03-13T20:51:25.615Z] [LOG] Sending book data with title "", author "", isNonFiction=false
[2025-03-13T20:51:26.731Z] [LOG] OCR complete for preview_page_03_right.png (1923 characters, 91.0% confidence)
[2025-03-13T20:51:26.731Z] [LOG] [7/8] Performing OCR on preview_page_04_left.png...
[2025-03-13T20:51:26.731Z] [LOG] Performing OCR on /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_04_left.png with Tesseract.js...
[2025-03-13T20:51:28.415Z] [LOG] OCR complete for preview_page_04_left.png (2053 characters, 92.0% confidence)
[2025-03-13T20:51:28.415Z] [LOG] [8/8] Performing OCR on preview_page_04_right.png...
[2025-03-13T20:51:28.415Z] [LOG] Performing OCR on /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/preview_page_04_right.png with Tesseract.js...
[2025-03-13T20:51:29.892Z] [LOG] OCR complete for preview_page_04_right.png (1880 characters, 92.0% confidence)
[2025-03-13T20:51:29.892Z] [LOG] OCR results saved to /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/ocr_results.json
[2025-03-13T20:51:29.897Z] [LOG] JSON file contains data for 8 preview pages
[2025-03-13T20:51:29.897Z] [LOG] =====================================================
[2025-03-13T20:51:29.897Z] [LOG] CRITICAL: AUTOMATICALLY GENERATING CONTENT ANALYSIS
[2025-03-13T20:51:29.897Z] [LOG] =====================================================
[2025-03-13T20:51:29.898Z] [LOG] CRITICAL STEP: Generating content_analysis.json with first and second pages...
[2025-03-13T20:51:29.898Z] [LOG] Using metadata from id_mapping.json: title="The Subtle Art of Not Giving a F*ck", author="Mark Manson", isNonFiction=true
[2025-03-13T20:51:29.898Z] [LOG] Extracting and cleaning first and second content pages with GPT-4o...
[2025-03-13T20:51:41.614Z] [LOG] No metadata file found at /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/5751ca60-34fe-44ec-b2bc-352a63bfcc1f/metadata.json
[2025-03-13T20:51:41.614Z] [LOG] Sending book data with title "", author "", isNonFiction=false
[2025-03-13T20:51:45.314Z] [LOG] Saving complete content_analysis.json with first and second pages
[2025-03-13T20:51:45.315Z] [LOG] Content analysis with first/second pages saved to /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/content_analysis.json
[2025-03-13T20:51:45.315Z] [LOG] Content extraction successful!
[2025-03-13T20:51:45.315Z] [LOG] First page excerpt: Chapter 1
Don’t Try
Charles Bukowski was an alcoholic, a womanizer, a chronic gambler, a lout, a che...
[2025-03-13T20:51:45.315Z] [LOG] Second page excerpt: Upon signing the contract, Bukowski wrote his first novel in three weeks. It was called simply Post ...
[2025-03-13T20:51:45.315Z] [LOG] OCR processing successfully completed for book yng_CwAAQBAJ
[2025-03-13T20:51:45.315Z] [LOG] Added 4 extracted preview pages to preview images
[2025-03-13T20:51:45.315Z] [LOG] Preview images generated: 9
[2025-03-13T20:51:45.315Z] [LOG] Cleaning up expired cache files...
[2025-03-13T20:51:45.315Z] [LOG] Skipped cleaning the book-ocr directory (not in use)
[2025-03-13T20:51:45.316Z] [LOG] Cleaned up 0 unnecessary files and 0 preview_info files
[2025-03-13T20:51:45.316Z] [LOG] Processing preview images with OCR in chronological order (after cleanup)...
[2025-03-13T20:51:45.317Z] [LOG] Processing 9 preview images chronologically for book yng_CwAAQBAJ
[2025-03-13T20:51:45.317Z] [ERROR] Missing 1 images. Waiting for them to be saved...
[2025-03-13T20:51:47.318Z] [ERROR] Still missing 1 images after waiting. Cannot proceed with OCR.
[2025-03-13T20:51:47.318Z] [LOG] Cleaning up expired cache files...
[2025-03-13T20:51:47.318Z] [LOG] Skipped cleaning the book-ocr directory (not in use)
[2025-03-13T20:51:47.320Z] [LOG] Cleaned up 0 unnecessary files and 0 preview_info files
[2025-03-13T20:51:47.320Z] Starting image generation. Preview count: 9
[2025-03-13T20:51:47.320Z] [LOG] Setting default recommendedStartPage to 1
[2025-03-13T20:51:47.320Z] [LOG] Making final check of content_analysis.json metadata
[2025-03-13T20:51:47.320Z] [LOG] Reading metadata from existing mapping file: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/id_mapping.json
[2025-03-13T20:51:47.320Z] [LOG] Found metadata in mapping: title="The Subtle Art of Not Giving a F*ck", author="Mark Manson", isNonFiction=true
[2025-03-13T20:51:47.320Z] [LOG] Reading existing content analysis file: /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/content_analysis.json
[2025-03-13T20:51:47.321Z] [LOG] Existing content analysis: {
  "title": "The Subtle Art of Not Giving a F*ck",
  "author": "Mark Manson",
  "fiction": false,
  "first_page": "Chapter 1\nDon’t Try\nCharles Bukowski was an alcoholic, a womanizer, a chronic gamb...
[2025-03-13T20:51:47.321Z] [LOG] Saving updated content analysis with metadata - title="The Subtle Art of Not Giving a F*ck", author="Mark Manson", fiction=false, isNonFiction=true
[2025-03-13T20:51:47.321Z] [LOG] Successfully updated content analysis file at /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/yng_CwAAQBAJ/content_analysis.json
[2025-03-13T20:51:47.321Z] [LOG] Skipping content analysis update for original ID 5751ca60-34fe-44ec-b2bc-352a63bfcc1f - no OCR results file
[2025-03-13T20:51:47.323Z] [LOG] Content analysis already has valid first and second page content
[2025-03-13T20:51:47.323Z] ===== MILESTONE: OCR_CLEANUP_START =====
[2025-03-13T20:51:47.323Z] Starting OCR text cleanup
[2025-03-13T20:51:47.323Z] [LOG] Milestone reached: OCR_CLEANUP_START
[2025-03-13T20:51:47.323Z] [LOG] Cleaning book content pages for yng_CwAAQBAJ...
[2025-03-13T20:51:47.324Z] [LOG] Processing book "The Subtle Art of Not Giving a F*ck" by Mark Manson (Non-Fiction: true)
[2025-03-13T20:51:56.125Z] [LOG] OCR cleanup complete. Updating content analysis...
[2025-03-13T20:51:56.126Z] [LOG] Updated content analysis file for yng_CwAAQBAJ with cleaned text
[2025-03-13T20:51:56.126Z] [LOG] Skipping content analysis update for originalId 5751ca60-34fe-44ec-b2bc-352a63bfcc1f - no OCR results file
[2025-03-13T20:51:56.126Z] ===== MILESTONE: OCR_CLEANUP_COMPLETE =====
[2025-03-13T20:51:56.126Z] OCR text cleanup completed successfully
[2025-03-13T20:51:56.126Z] [LOG] Milestone reached: OCR_CLEANUP_COMPLETE
[2025-03-13T20:51:56.129Z] [LOG] OCR results file not found at /Users/misra.sanjay/Desktop/projects/calai/oa/turborepo/my-turborepo/apps/processor/cache/book-images/5751ca60-34fe-44ec-b2bc-352a63bfcc1f/ocr_results.json. Cannot update content_analysis.json without OCR results.
[2025-03-13T20:51:56.129Z] [LOG] FINAL VERIFICATION - Metadata in returned object: title="The Subtle Art of Not Giving a F*ck", author="Mark Manson", isNonFiction=true
[2025-03-13T20:51:56.129Z] [LOG] Recommended start page: 1
[2025-03-13T20:51:56.129Z] [LOG] Book availability status: Available
[2025-03-13T20:51:56.129Z] [LOG] Book processing status: complete
[2025-03-13T20:51:56.129Z] Book content processing complete
[2025-03-13T20:51:56.129Z] Final content analysis status: Not available
[2025-03-13T20:51:56.129Z] Final metadata values: title="The Subtle Art of Not Giving a F*ck", author="Mark Manson", isNonFiction=true
[2025-03-13T20:51:56.129Z] Final recommended start page: 1
[2025-03-13T20:51:56.129Z] Final availability status: Available
[2025-03-13T20:51:56.129Z] Final processing status: complete
[2025-03-13T20:51:56.129Z] === BOOK CONTENT PROCESSING FINISHED ===
[2025-03-13T20:51:56.129Z] ===== MILESTONE: BOOK_CONTENT_COMPLETE =====
[2025-03-13T20:51:56.129Z] Book content processing complete
[2025-03-13T20:51:56.129Z] [LOG] Milestone reached: BOOK_CONTENT_COMPLETE
[2025-03-13T20:51:56.129Z] === BOOK CONTENT PROCESSING RESULT ===
[2025-03-13T20:51:56.129Z] Title: The Subtle Art of Not Giving a F*ck
[2025-03-13T20:51:56.129Z] Author: Mark Manson
[2025-03-13T20:51:56.129Z] Non-Fiction: Yes
[2025-03-13T20:51:56.129Z] Preview Images: 9
[2025-03-13T20:51:56.129Z] Sequential Pages: 0
[2025-03-13T20:51:56.129Z] === END CONTENT PROCESSING ===

[2025-03-13T20:51:56.129Z] [LOG] Book processing complete, isNonFiction: true
[2025-03-13T20:51:56.129Z] [LOG] Preview images generated: 9
[2025-03-13T20:51:56.129Z] [LOG] Sequential pages generated: 0
[2025-03-13T20:51:56.130Z] [LOG] Recommended start page: 1
[2025-03-13T20:51:56.130Z] === API RESPONSE ===
[2025-03-13T20:51:56.130Z] Status: 200 OK
[2025-03-13T20:51:56.130Z] Response Body Summary:
[2025-03-13T20:51:56.130Z] - Book ID: 5751ca60-34fe-44ec-b2bc-352a63bfcc1f
[2025-03-13T20:51:56.130Z] - Title: The Subtle Art of Not Giving a F*ck
[2025-03-13T20:51:56.130Z] - Author: Mark Manson
[2025-03-13T20:51:56.130Z] - Preview Images: 9
[2025-03-13T20:51:56.130Z] - OCR Results: 0 pages
[2025-03-13T20:51:56.130Z] === END API RESPONSE ===

[2025-03-13T20:51:56.130Z] ===== MILESTONE: API_REQUEST_COMPLETE =====
[2025-03-13T20:51:56.130Z] Book processing completed successfully
[2025-03-13T20:51:56.130Z] [LOG] Milestone reached: API_REQUEST_COMPLETE
[2025-03-13T20:51:56.130Z] 
[2025-03-13T20:51:56.130Z] === Processing Complete ===
[2025-03-13T20:51:56.130Z] Finished: 2025-03-13T20:51:56.130Z
[2025-03-13T20:51:56.130Z] Duration: 53.44 seconds
[2025-03-13T20:51:56.130Z] === Additional Information ===
[2025-03-13T20:51:56.130Z] status: "success"
[2025-03-13T20:51:56.130Z] title: "The Subtle Art of Not Giving a F*ck"
[2025-03-13T20:51:56.130Z] author: "Mark Manson"
[2025-03-13T20:51:56.130Z] isNonFiction: true
[2025-03-13T20:51:56.130Z] previewImages: 9
[2025-03-13T20:51:56.130Z] sequentialPages: 0